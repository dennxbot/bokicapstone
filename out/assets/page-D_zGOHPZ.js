import{r as m,j as e,u as F}from"./index-rA_UgCij.js";import{u as D}from"./useAuth-CjWk1XML.js";import{B as h}from"./Button-CaIT6pSL.js";import{I as o}from"./Input-CP5KOtNX.js";import{u as L}from"./useAddresses-Dc5xVLle.js";const I=()=>{const{addresses:l,isLoading:t,error:p,createAddress:y,updateAddress:n,deleteAddress:b,setDefaultAddress:d,formatAddress:j}=L(),[x,g]=m.useState(!1),[i,N]=m.useState(null),[f,u]=m.useState(!1),[r,v]=m.useState({label:"",address_line_1:"",address_line_2:"",city:"",state:"",postal_code:"",country:"Philippines",is_default:!1}),w=()=>{v({label:"",address_line_1:"",address_line_2:"",city:"",state:"",postal_code:"",country:"Philippines",is_default:!1}),N(null),g(!1)},c=s=>{const{name:a,value:S,type:E}=s.target;v(P=>({...P,[a]:E==="checkbox"?s.target.checked:S}))},_=s=>{v({label:s.label,address_line_1:s.address_line_1,address_line_2:s.address_line_2||"",city:s.city||"",state:s.state||"",postal_code:s.postal_code||"",country:s.country,is_default:s.is_default}),N(s),g(!0)},C=async s=>{if(s.preventDefault(),!r.label.trim()||!r.address_line_1.trim()){alert("Please fill in the required fields (Label and Address Line 1)");return}u(!0);try{const a={label:r.label.trim(),address_line_1:r.address_line_1.trim(),address_line_2:r.address_line_2.trim()||void 0,city:r.city.trim()||void 0,state:r.state.trim()||void 0,postal_code:r.postal_code.trim()||void 0,country:r.country,is_default:r.is_default};i?await n({...a,id:i.id}):await y(a),w()}catch(a){console.error("Error saving address:",a),alert(a instanceof Error?a.message:"Failed to save address")}finally{u(!1)}},A=async s=>{if(confirm("Are you sure you want to delete this address?"))try{await b(s)}catch(a){console.error("Error deleting address:",a),alert(a instanceof Error?a.message:"Failed to delete address")}},k=async s=>{try{await d(s)}catch(a){console.error("Error setting default address:",a),alert(a instanceof Error?a.message:"Failed to set default address")}};return t&&l.length===0?e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-orange-600 mr-3"}),e.jsx("span",{className:"text-gray-600",children:"Loading addresses..."})]})}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[e.jsx("i",{className:"ri-map-pin-line text-orange-600 mr-2"}),"My Addresses"]}),e.jsxs(h,{onClick:()=>g(!0),className:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg font-medium",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Add Address"]})]}),p&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"ri-error-warning-line text-red-500"}),e.jsx("p",{className:"text-red-700 text-sm",children:p})]})}),e.jsx("div",{className:"space-y-4 mb-6",children:l.length===0?e.jsxs("div",{className:"text-center py-8 flex flex-col items-center justify-center",children:[e.jsx("i",{className:"ri-map-pin-line text-4xl text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No addresses saved yet"}),e.jsx(h,{onClick:()=>g(!0),variant:"outline",className:"border-orange-300 text-orange-600 hover:bg-orange-50",children:"Add Your First Address"})]}):l.map(s=>e.jsx("div",{className:`border rounded-lg p-4 ${s.is_default?"border-orange-300 bg-orange-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:s.label}),s.is_default&&e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full font-medium",children:"Default"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:j(s)})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[!s.is_default&&e.jsx("button",{onClick:()=>k(s.id),className:"text-orange-600 hover:text-orange-700 p-2 rounded-lg hover:bg-orange-50 transition-colors",title:"Set as default",children:e.jsx("i",{className:"ri-star-line"})}),e.jsx("button",{onClick:()=>_(s),className:"text-blue-600 hover:text-blue-700 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"Edit address",children:e.jsx("i",{className:"ri-edit-line"})}),l.length>1&&e.jsx("button",{onClick:()=>A(s.id),className:"text-red-600 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"Delete address",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})},s.id))}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:i?"Edit Address":"Add New Address"}),e.jsx("button",{onClick:w,className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsx(o,{label:"Label *",name:"label",value:r.label,onChange:c,placeholder:"e.g., Home, Work, Office",required:!0}),e.jsx(o,{label:"Address Line 1 *",name:"address_line_1",value:r.address_line_1,onChange:c,placeholder:"Street address, building name",required:!0}),e.jsx(o,{label:"Address Line 2",name:"address_line_2",value:r.address_line_2,onChange:c,placeholder:"Apartment, suite, unit, etc."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(o,{label:"City",name:"city",value:r.city,onChange:c,placeholder:"City"}),e.jsx(o,{label:"State/Province",name:"state",value:r.state,onChange:c,placeholder:"State/Province"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(o,{label:"Postal Code",name:"postal_code",value:r.postal_code,onChange:c,placeholder:"Postal Code"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),e.jsxs("select",{name:"country",value:r.country,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors",children:[e.jsx("option",{value:"Philippines",children:"Philippines"}),e.jsx("option",{value:"United States",children:"United States"}),e.jsx("option",{value:"Canada",children:"Canada"}),e.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),e.jsx("option",{value:"Australia",children:"Australia"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_default",name:"is_default",checked:r.is_default,onChange:c,className:"mr-3 h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_default",className:"text-sm text-gray-700",children:"Set as default address"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(h,{type:"submit",disabled:f,className:"flex-1 bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-lg font-semibold",children:f?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),i?"Updating...":"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:`${i?"ri-save-line":"ri-add-line"} mr-2`}),i?"Update Address":"Add Address"]})}),e.jsx(h,{type:"button",onClick:w,variant:"outline",disabled:f,className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})})]})},K=()=>{const l=F(),{user:t,logout:p,updateProfile:y}=D(),[n,b]=m.useState(!1),[d,j]=m.useState({fullName:"",email:"",contactNumber:""}),[x,g]=m.useState(!1);m.useEffect(()=>{t&&j({fullName:t.full_name||"",email:t.email||"",contactNumber:t.contact_number||""})},[t]);const i=u=>{j({...d,[u.target.name]:u.target.value})},N=async()=>{if(t){g(!0);try{await y({full_name:d.fullName,email:d.email,contact_number:d.contactNumber}),b(!1),alert("Profile updated successfully!")}catch(u){console.error("Error updating profile:",u),alert("Failed to update profile. Please try again.")}finally{g(!1)}}},f=()=>{p(),l("/")};return t?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 pb-20 lg:pb-6",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>l("/"),className:"mr-4 p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx("i",{className:"ri-arrow-left-line text-xl text-gray-700"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Profile"})]})})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 text-center sticky top-6",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"ri-user-line text-3xl text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-1",children:t.full_name||"User"}),e.jsx("p",{className:"text-gray-600 mb-3",children:t.email}),t.role==="admin"&&e.jsx("span",{className:"inline-block px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white text-sm font-medium rounded-full shadow-sm",children:"Administrator"}),t.role==="customer"&&e.jsx("span",{className:"inline-block px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white text-sm font-medium rounded-full shadow-sm",children:"Customer"})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[e.jsx("i",{className:"ri-user-settings-line text-orange-600 mr-2"}),"Personal Information"]}),e.jsxs("button",{onClick:()=>b(!n),className:"flex items-center px-4 py-2 text-orange-600 hover:text-orange-700 hover:bg-orange-50 rounded-lg transition-colors",disabled:x,children:[e.jsx("i",{className:`${n?"ri-close-line":"ri-edit-line"} text-lg mr-1`}),n?"Cancel":"Edit"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{label:"Full Name",name:"fullName",value:d.fullName,onChange:i,disabled:!n}),e.jsx(o,{label:"Email",name:"email",type:"email",value:d.email,onChange:i,disabled:!n}),e.jsx(o,{label:"Contact Number",name:"contactNumber",type:"tel",value:d.contactNumber,onChange:i,disabled:!n,placeholder:"Enter your phone number"})]}),n&&e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3",children:[e.jsxs(h,{onClick:N,disabled:x,className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white py-3 rounded-lg font-semibold whitespace-nowrap shadow-lg disabled:opacity-50",children:[e.jsx("i",{className:`${x?"ri-loader-4-line animate-spin":"ri-save-line"} mr-2`}),x?"Saving...":"Save Changes"]}),e.jsx(h,{onClick:()=>b(!1),variant:"outline",disabled:x,className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50 py-3 rounded-lg font-semibold whitespace-nowrap disabled:opacity-50",children:"Cancel"})]})]}),e.jsx(I,{}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-6 flex items-center",children:[e.jsx("i",{className:"ri-flashlight-line text-orange-600 mr-2"}),"Quick Actions"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>l("/orders"),className:"flex items-center justify-between p-4 rounded-xl border border-gray-200 hover:border-orange-300 hover:bg-orange-50 transition-all group",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-orange-200 transition-colors",children:e.jsx("i",{className:"ri-shopping-bag-line text-lg text-orange-600"})}),e.jsx("span",{className:"font-medium text-gray-800",children:"My Orders"})]}),e.jsx("i",{className:"ri-arrow-right-s-line text-gray-400 group-hover:text-orange-600 transition-colors"})]}),t.role==="admin"&&e.jsxs("button",{onClick:()=>l("/admin"),className:"flex items-center justify-between p-4 rounded-xl border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all group",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-200 transition-colors",children:e.jsx("i",{className:"ri-dashboard-line text-lg text-blue-600"})}),e.jsx("span",{className:"font-medium text-gray-800",children:"Admin Dashboard"})]}),e.jsx("i",{className:"ri-arrow-right-s-line text-gray-400 group-hover:text-blue-600 transition-colors"})]}),e.jsxs("button",{onClick:()=>alert("Change password functionality would be implemented here"),className:"flex items-center justify-between p-4 rounded-xl border border-gray-200 hover:border-purple-300 hover:bg-purple-50 transition-all group",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-purple-200 transition-colors",children:e.jsx("i",{className:"ri-lock-line text-lg text-purple-600"})}),e.jsx("span",{className:"font-medium text-gray-800",children:"Change Password"})]}),e.jsx("i",{className:"ri-arrow-right-s-line text-gray-400 group-hover:text-purple-600 transition-colors"})]}),e.jsxs("button",{onClick:()=>l("/menu"),className:"flex items-center justify-between p-4 rounded-xl border border-gray-200 hover:border-green-300 hover:bg-green-50 transition-all group",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-green-200 transition-colors",children:e.jsx("i",{className:"ri-restaurant-line text-lg text-green-600"})}),e.jsx("span",{className:"font-medium text-gray-800",children:"Browse Menu"})]}),e.jsx("i",{className:"ri-arrow-right-s-line text-gray-400 group-hover:text-green-600 transition-colors"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-6 flex items-center",children:[e.jsx("i",{className:"ri-settings-3-line text-orange-600 mr-2"}),"Account Settings"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-50",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-notification-line text-xl text-gray-600 mr-3"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-800 block",children:"Notifications"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Manage your notification preferences"})]})]}),e.jsx("div",{className:"w-12 h-6 bg-orange-600 rounded-full relative cursor-pointer",children:e.jsx("div",{className:"w-5 h-5 bg-white rounded-full absolute top-0.5 right-0.5 shadow-sm"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-50",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-shield-check-line text-xl text-gray-600 mr-3"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-800 block",children:"Privacy Settings"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Control your privacy preferences"})]})]}),e.jsx("i",{className:"ri-arrow-right-s-line text-gray-400"})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs(h,{onClick:f,className:"w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white py-4 rounded-xl font-semibold whitespace-nowrap shadow-lg transition-all",children:[e.jsx("i",{className:"ri-logout-box-line mr-2"}),"Logout"]})})]})]})})]}):(l("/login"),null)};export{K as default};
//# sourceMappingURL=page-D_zGOHPZ.js.map
