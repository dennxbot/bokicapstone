import{u as y,r as i,j as e}from"./index-rA_UgCij.js";import{u as b}from"./useAuth-CjWk1XML.js";import{u as N}from"./useOrders-F2k_At8J.js";import{f as u}from"./currency-XAUvB6j1.js";import{B as p}from"./Button-CaIT6pSL.js";const L=()=>{const r=y(),{user:n,isLoading:l}=b(),{fetchUserOrders:c}=N(),[d,o]=i.useState([]),[h,x]=i.useState(!0);i.useEffect(()=>{if(l)return;if(!n){r("/login");return}(async()=>{try{x(!0);const t=await c(n.id);o(t)}catch(t){console.error("Error loading user orders:",t),o([])}finally{x(!1)}})()},[n,r,l,c]);const g=s=>{switch(s){case"pending":return"text-yellow-600 bg-yellow-100";case"preparing":return"text-blue-600 bg-blue-100";case"ready":return"text-purple-600 bg-purple-100";case"out_for_delivery":return"text-purple-600 bg-purple-100";case"completed":return"text-green-600 bg-green-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},j=s=>s.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ");return l||h?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-orange-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):n?e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>r("/"),className:"mr-4 cursor-pointer",children:e.jsx("i",{className:"ri-arrow-left-line text-xl"})}),e.jsx("h1",{className:"text-xl font-bold",children:"My Orders"})]})})}),e.jsx("div",{className:"max-w-md mx-auto px-4 py-6",children:d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-shopping-bag-line text-3xl text-gray-400"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"No Orders Yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You haven't placed any orders yet. Start browsing our delicious menu!"}),e.jsx(p,{onClick:()=>r("/"),className:"cursor-pointer",children:"Browse Menu"})]}):e.jsx("div",{className:"space-y-4",children:d.map(s=>{var t;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg",children:["Order #",s.id.slice(-4)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(s.created_at).toLocaleDateString()," at ",new Date(s.created_at).toLocaleTimeString()]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${g(s.status)}`,children:j(s.status)})]}),e.jsx("div",{className:"space-y-2 mb-3",children:(t=s.order_items)==null?void 0:t.map((a,f)=>{var m;return e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("div",{children:[e.jsxs("span",{children:[a.quantity,"x ",((m=a.food_items)==null?void 0:m.name)||"Unknown Item"]}),a.size_name&&e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",a.size_name,")"]})]}),e.jsx("span",{children:u(a.total_price)})]},f)})}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-lg",children:u(s.total_amount)}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:s.order_type})]}),e.jsx(p,{onClick:()=>r(`/order/${s.id}`),variant:"outline",className:"text-sm px-4 py-2 whitespace-nowrap cursor-pointer",children:"View Details"})]})]},s.id)})})})]}):null};export{L as default};
//# sourceMappingURL=page-B8yRHwDo.js.map
