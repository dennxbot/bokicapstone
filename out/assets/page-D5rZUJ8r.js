import{r as n,j as e}from"./index-rA_UgCij.js";import{u as O}from"./useSizes-DUu48KPE.js";import{u as L}from"./useAuth-CjWk1XML.js";import{B as l}from"./Button-CaIT6pSL.js";function B(){const{user:a}=L(),{sizeOptions:m,isLoading:v,error:u,fetchAllSizeOptions:y,createSizeOption:_,updateSizeOption:S,deleteSizeOption:w}=O(),[C,c]=n.useState(!1),[d,b]=n.useState(null),[s,p]=n.useState({name:"",description:"",price_multiplier:"1.00",is_active:!0,sort_order:"0"}),[i,g]=n.useState({}),[j,f]=n.useState(!1);n.useEffect(()=>{(a==null?void 0:a.role)==="admin"&&y()},[a]);const z=()=>{const r={};s.name.trim()?s.name.length>50&&(r.name="Size name must be 50 characters or less"):r.name="Size name is required";const t=parseFloat(s.price_multiplier);isNaN(t)||t<=0?r.price_multiplier="Price multiplier must be a positive number":t>9.99&&(r.price_multiplier="Price multiplier cannot exceed 9.99");const x=parseInt(s.sort_order);return(isNaN(x)||x<0)&&(r.sort_order="Sort order must be a non-negative number"),g(r),Object.keys(r).length===0},o=r=>{const{name:t,value:x,type:D}=r.target;p(h=>({...h,[t]:D==="checkbox"?r.target.checked:x})),i[t]&&g(h=>({...h,[t]:void 0}))},k=async r=>{if(r.preventDefault(),!!z()){f(!0);try{const t={name:s.name.trim(),description:s.description.trim()||void 0,price_multiplier:parseFloat(s.price_multiplier),is_active:s.is_active,sort_order:parseInt(s.sort_order)};d?await S(d.id,t):await _(t),N(),c(!1)}catch(t){console.error("Error saving size:",t)}finally{f(!1)}}},E=r=>{b(r),p({name:r.name,description:r.description||"",price_multiplier:r.price_multiplier.toString(),is_active:r.is_active,sort_order:r.sort_order.toString()}),c(!0)},F=async r=>{if(window.confirm(`Are you sure you want to delete the "${r.name}" size? This action cannot be undone.`))try{await w(r.id)}catch(t){console.error("Error deleting size:",t)}},N=()=>{p({name:"",description:"",price_multiplier:"1.00",is_active:!0,sort_order:"0"}),g({}),b(null)},A=()=>{N(),c(!1)};return(a==null?void 0:a.role)!=="admin"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"You need admin privileges to access this page."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Size Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create and manage custom sizes with pricing"})]}),e.jsxs(l,{onClick:()=>c(!0),className:"bg-orange-500 hover:bg-orange-600 text-white",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Add New Size"]})]})}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("i",{className:"ri-error-warning-line text-red-400 mr-2"}),e.jsx("p",{className:"text-red-700",children:u})]})}),C&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:d?"Edit Size":"Add New Size"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size Name *"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:o,placeholder:"e.g., Small, Medium, Large",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 ${i.name?"border-red-300":"border-gray-300"}`,maxLength:50}),i.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Multiplier *"}),e.jsx("input",{type:"number",name:"price_multiplier",value:s.price_multiplier,onChange:o,placeholder:"1.00",step:"0.01",min:"0.01",max:"9.99",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 ${i.price_multiplier?"border-red-300":"border-gray-300"}`}),i.price_multiplier&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.price_multiplier}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"1.00 = same price, 1.25 = 25% more, 0.75 = 25% less"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),e.jsx("input",{type:"number",name:"sort_order",value:s.sort_order,onChange:o,placeholder:"0",min:"0",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 ${i.sort_order?"border-red-300":"border-gray-300"}`}),i.sort_order&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.sort_order}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers appear first"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:s.is_active,onChange:o,className:"mr-2"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Active (available for selection)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),e.jsx("textarea",{name:"description",value:s.description,onChange:o,placeholder:"Optional description for this size",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(l,{type:"submit",disabled:j,className:"bg-orange-500 hover:bg-orange-600 text-white",children:j?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),d?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line mr-2"}),d?"Update Size":"Create Size"]})}),e.jsx(l,{type:"button",onClick:A,variant:"outline",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Existing Sizes"}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[m.length," size",m.length!==1?"s":""," configured"]})]}),v?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Loading sizes..."})]}):m.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("i",{className:"ri-price-tag-3-line text-4xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sizes configured"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first size to get started"}),e.jsxs(l,{onClick:()=>c(!0),className:"bg-orange-500 hover:bg-orange-600 text-white",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Add First Size"]})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:m.map(r=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${r.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.is_active?"Active":"Inactive"}),e.jsxs("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-800 rounded-full",children:[r.price_multiplier,"x price"]})]}),r.description&&e.jsx("p",{className:"text-gray-600 mt-1",children:r.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["Sort order: ",r.sort_order]}),e.jsxs("span",{children:["Created: ",new Date(r.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(l,{onClick:()=>E(r),variant:"outline",size:"sm",children:[e.jsx("i",{className:"ri-edit-line mr-1"}),"Edit"]}),e.jsxs(l,{onClick:()=>F(r),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx("i",{className:"ri-delete-bin-line mr-1"}),"Delete"]})]})]})},r.id))})]})]})})}export{B as default};
//# sourceMappingURL=page-D5rZUJ8r.js.map
