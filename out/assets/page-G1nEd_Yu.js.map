{"version":3,"file":"page-G1nEd_Yu.js","sources":["../../src/pages/menu/page.tsx"],"sourcesContent":["\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useFoodItems } from '../../hooks/useFoodItems';\nimport { useCart } from '../../hooks/useCart';\nimport { useAuth } from '../../hooks/useAuth';\nimport FoodCard from '../../components/feature/FoodCard';\nimport BottomNavigation from '../../components/feature/BottomNavigation';\nimport FloatingCartButton from '../../components/feature/FloatingCartButton';\nimport Button from '../../components/base/Button';\nimport Input from '../../components/base/Input';\n\nexport default function Menu() {\n  const navigate = useNavigate();\n  const { addToCart } = useCart();\n  const { user } = useAuth();\n  const { categories, isLoading, searchFoodItems, refetch } = useFoodItems();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('All');\n  const [showAddToCartMessage, setShowAddToCartMessage] = useState(false);\n\n  // Use the improved search function from the hook\n  const searchResults = searchFoodItems(searchQuery);\n  \n  const filteredItems = searchResults.filter(item => {\n    const matchesCategory = selectedCategory === 'All' || item.category_id === selectedCategory;\n    return matchesCategory; // Remove the is_available filter - show all items\n  });\n\n  const handleAddToCart = (item: any) => {\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n    \n    // Use the correct database structure\n    addToCart(item);\n    setShowAddToCartMessage(true);\n    setTimeout(() => setShowAddToCartMessage(false), 3000);\n  };\n\n  const handleViewDetails = (item: any) => {\n    navigate(`/food/${item.id}`);\n  };\n\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchQuery(e.target.value);\n    // Reset category filter when searching\n    if (e.target.value.trim()) {\n      setSelectedCategory('All');\n    }\n  };\n\n  const clearSearch = () => {\n    setSearchQuery('');\n    setSelectedCategory('All');\n  };\n\n  const handleRefresh = () => {\n    refetch();\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"relative\">\n            <div className=\"animate-spin rounded-full h-16 w-16 border-4 border-orange-200 border-t-orange-500 mx-auto mb-4\"></div>\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              <i className=\"ri-restaurant-line text-orange-500 text-xl\"></i>\n            </div>\n          </div>\n          <p className=\"text-gray-600 font-medium\">Loading menu...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50 pb-20 lg:pb-8\">\n      {/* Sticky Header */}\n      <div className=\"sticky top-0 z-40 bg-white/95 backdrop-blur-md shadow-lg border-b border-orange-100\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center\">\n              <button\n                onClick={() => navigate('/')}\n                className=\"w-10 h-10 bg-orange-100 hover:bg-orange-200 rounded-full flex items-center justify-center cursor-pointer transition-colors duration-300 mr-4\"\n              >\n                <i className=\"ri-arrow-left-line text-xl text-orange-600\" />\n              </button>\n              <div>\n                <h1 className=\"text-xl lg:text-2xl font-bold text-gray-900\">Menu</h1>\n                <p className=\"text-sm text-gray-600\">\n                  {searchQuery ? `${filteredItems.length} results found` : `${filteredItems.length} delicious items`}\n                </p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={handleRefresh}\n                className=\"w-10 h-10 bg-orange-100 hover:bg-orange-200 rounded-full flex items-center justify-center cursor-pointer transition-colors duration-300\"\n                title=\"Refresh menu\"\n              >\n                <i className=\"ri-refresh-line text-xl text-orange-600\" />\n              </button>\n              <div className=\"lg:hidden\">\n                <button\n                  onClick={() => navigate('/cart')}\n                  className=\"w-10 h-10 bg-orange-100 hover:bg-orange-200 rounded-full flex items-center justify-center cursor-pointer transition-colors duration-300\"\n                >\n                  <i className=\"ri-shopping-cart-line text-xl text-orange-600\" />\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Search Bar */}\n          <div className=\"relative\">\n            <Input\n              placeholder=\"Search by name, description, or category...\"\n              value={searchQuery}\n              onChange={handleSearchChange}\n              icon=\"ri-search-line\"\n              className=\"pl-12 pr-4 py-3 text-base bg-white/70 backdrop-blur-sm border-orange-200 focus:border-orange-400 focus:ring-orange-200 rounded-2xl shadow-sm w-full\"\n            />\n            {searchQuery && (\n              <button\n                onClick={clearSearch}\n                className=\"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 cursor-pointer\"\n              >\n                <i className=\"ri-close-line\"></i>\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Category Tabs */}\n        <div className=\"py-6\">\n          <div className=\"flex gap-3 overflow-x-auto pb-3 scrollbar-hide lg:flex-wrap\">\n            <button\n              onClick={() => setSelectedCategory('All')}\n              className={`flex-shrink-0 px-6 py-3 rounded-2xl text-sm font-semibold whitespace-nowrap cursor-pointer transition-all duration-300 transform hover:scale-105 ${\n                selectedCategory === 'All'\n                  ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg shadow-orange-200'\n                  : 'bg-white text-gray-700 hover:bg-orange-50 border border-orange-100 shadow-sm'\n              }`}\n            >\n              <i className=\"ri-apps-line mr-2\"></i>\n              All Items\n            </button>\n            {categories.map((category) => (\n              <button\n                key={category.id}\n                onClick={() => setSelectedCategory(category.id)}\n                className={`flex-shrink-0 px-6 py-3 rounded-2xl text-sm font-semibold whitespace-nowrap cursor-pointer transition-all duration-300 transform hover:scale-105 ${\n                  selectedCategory === category.id\n                    ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg shadow-orange-200'\n                    : 'bg-white text-gray-700 hover:bg-orange-50 border border-orange-100 shadow-sm'\n                }`}\n              >\n                {category.name}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Menu Grid */}\n        <div className=\"pb-8\">\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6\">\n            {filteredItems.map((item) => (\n              <FoodCard\n                key={item.id}\n                item={{\n                  id: item.id,\n                  name: item.name,\n                  description: item.description || '',\n                  price: item.price,\n                  image_url: item.image_url || `https://readdy.ai/api/search-image?query=delicious%20${item.name}%20food%20photography%20with%20simple%20clean%20background&width=400&height=300&seq=${item.id}&orientation=landscape`,\n                  category_id: item.category_id,\n                  is_available: item.is_available,\n                  is_featured: item.is_featured,\n                  preparation_time: item.preparation_time\n                }}\n                onAddToCart={() => handleAddToCart(item)}\n                onViewDetails={() => handleViewDetails(item)}\n              />\n            ))}\n          </div>\n\n          {filteredItems.length === 0 && (\n            <div className=\"text-center py-16 bg-white rounded-3xl shadow-sm border border-orange-100\">\n              <div className=\"w-20 h-20 bg-gradient-to-r from-orange-100 to-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <i className=\"ri-search-line text-3xl text-orange-400\" />\n              </div>\n              <h4 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                {searchQuery ? 'No results found' : 'No items found'}\n              </h4>\n              <p className=\"text-gray-500 mb-4\">\n                {searchQuery \n                  ? `No items match \"${searchQuery}\". Try different keywords or browse categories.`\n                  : 'Try searching for something else or browse different categories'\n                }\n              </p>\n              <div className=\"flex gap-3 justify-center\">\n                <Button\n                  onClick={clearSearch}\n                  variant=\"outline\"\n                  className=\"border-orange-200 text-orange-600 hover:bg-orange-50\"\n                >\n                  {searchQuery ? 'Clear search' : 'Reset filters'}\n                </Button>\n                <Button\n                  onClick={() => {\n                    setSearchQuery('');\n                    setSelectedCategory('All');\n                  }}\n                  className=\"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600\"\n                >\n                  View all items\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Scroll to Top Button */}\n      <button\n        onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}\n        className=\"fixed bottom-24 lg:bottom-6 left-6 w-12 h-12 bg-white/90 backdrop-blur-sm hover:bg-white border border-orange-200 hover:border-orange-300 rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer\"\n      >\n        <i className=\"ri-arrow-up-line text-xl text-orange-600\"></i>\n      </button>\n\n      {/* Add to Cart Message */}\n      {showAddToCartMessage && (\n        <div className=\"fixed top-6 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-4 rounded-2xl shadow-2xl z-50 animate-bounce\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center\">\n              <i className=\"ri-check-line text-lg\" />\n            </div>\n            <div>\n              <p className=\"font-semibold\">Added to cart!</p>\n              <p className=\"text-sm opacity-90\">Item successfully added</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Mobile Bottom Navigation */}\n      <div className=\"lg:hidden\">\n        <BottomNavigation />\n      </div>\n\n      {/* Desktop Floating Cart Button */}\n      <div className=\"hidden lg:block\">\n        <FloatingCartButton />\n      </div>\n    </div>\n  );\n}\n"],"names":["Menu","navigate","useNavigate","addToCart","useCart","user","useAuth","categories","isLoading","searchFoodItems","refetch","useFoodItems","searchQuery","setSearchQuery","useState","selectedCategory","setSelectedCategory","showAddToCartMessage","setShowAddToCartMessage","filteredItems","item","handleAddToCart","handleViewDetails","handleSearchChange","e","clearSearch","handleRefresh","jsxs","jsx","Input","category","FoodCard","Button","BottomNavigation","FloatingCartButton"],"mappings":"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"}